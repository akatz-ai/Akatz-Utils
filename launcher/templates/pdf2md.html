{% extends "base.html" %}
{% block title %}PDF to Markdown - Akatz Utils{% endblock %}

{% block content %}
<div class="page-header">
    <h1>PDF to Markdown</h1>
    <p>Convert PDF files to Markdown format for efficient LLM processing</p>
</div>

<div class="single-panel">
    <div class="dropzone" id="dropzone">
        <div class="dropzone-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
        </div>
        <p>Drag &amp; drop a PDF here, or click to browse</p>
        <p class="dropzone-hint">PDF files only</p>
        <p class="dropzone-filename" id="filename"></p>
        <input type="file" id="fileInput" accept=".pdf,application/pdf">
    </div>

    <div id="progressSection" style="display:none">
        <div class="panel">
            <div class="panel-title">Conversion Progress</div>
            <div class="progress-container">
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progressBar"></div>
                </div>
                <div class="progress-text">
                    <span id="progressStatus">Starting...</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>
        </div>
    </div>

    <div id="resultSection" style="display:none">
        <div class="panel">
            <div class="panel-title">Result</div>
            <div class="stats-box" style="margin-bottom:1rem">
                <div class="stat-row"><span class="stat-label">PDF size</span><span class="stat-value" id="inputSize">-</span></div>
                <div class="stat-row"><span class="stat-label">Markdown size</span><span class="stat-value" id="outputSize">-</span></div>
                <div class="stat-row"><span class="stat-label">Reduction</span><span class="stat-value" id="reduction">-</span></div>
            </div>
            <div class="btn-row">
                <button class="btn btn-primary btn-full" id="downloadBtn">Download Markdown</button>
                <button class="btn btn-secondary" id="togglePreview">Show Preview</button>
            </div>
        </div>

        <div class="panel" id="previewPanel" style="display:none;margin-top:1rem">
            <div class="panel-title">Markdown Preview</div>
            <div class="markdown-output" id="mdPreview"></div>
        </div>
    </div>

    <div id="statusMsg"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/pdf2md.js') }}"></script>
{% endblock %}
