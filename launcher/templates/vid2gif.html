{% extends "base.html" %}
{% block title %}Video to GIF - Akatz Utils{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Video to GIF</h1>
    <p>Convert video files to GIF with customizable size, duration, and dimensions</p>
</div>

<div class="single-panel">
    <div class="dropzone" id="dropzone">
        <div class="dropzone-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/><line x1="7" y1="2" x2="7" y2="22"/><line x1="17" y1="2" x2="17" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
        </div>
        <p>Drag &amp; drop a video here, or click to browse</p>
        <p class="dropzone-hint">MP4, AVI, MOV, MKV, WMV, FLV, WebM</p>
        <p class="dropzone-filename" id="filename"></p>
        <input type="file" id="fileInput" accept="video/*,.mp4,.avi,.mov,.mkv,.wmv,.flv,.webm">
    </div>

    <div id="optionsSection" style="display:none">
        <div class="panel">
            <div class="panel-title">Conversion Options</div>
            <div class="options-grid">
                <div class="control-group">
                    <div class="control-label"><span>GIF Duration (seconds)</span></div>
                    <input type="number" id="duration" value="5" min="1" max="60" step="1">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>Target Size (MB)</span></div>
                    <input type="number" id="targetSize" value="5" min="0.5" max="50" step="0.5">
                </div>
            </div>

            <hr class="divider">
            <div class="panel-title">Output Dimensions</div>

            <div class="toggle-row">
                <input type="checkbox" id="useOriginal" checked>
                <label for="useOriginal">Use original dimensions</label>
            </div>

            <div id="dimControls" style="display:none">
                <div class="inline-inputs" style="margin-bottom:0.75rem">
                    <label>Width</label>
                    <input type="number" id="outWidth" placeholder="px" min="1">
                    <label>Height</label>
                    <input type="number" id="outHeight" placeholder="px" min="1">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>Aspect Ratio Mode</span></div>
                    <div class="radio-group">
                        <label><input type="radio" name="aspect" value="maintain" checked> Maintain</label>
                        <label><input type="radio" name="aspect" value="crop"> Crop</label>
                        <label><input type="radio" name="aspect" value="fill"> Fill/Stretch</label>
                    </div>
                </div>
            </div>

            <div class="btn-row">
                <button class="btn btn-primary btn-full" id="convertBtn">Convert to GIF</button>
            </div>
        </div>
    </div>

    <div id="progressSection" style="display:none">
        <div class="panel">
            <div class="panel-title">Conversion Progress</div>
            <div class="progress-container">
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progressBar" style="width:0%"></div>
                </div>
                <div class="progress-text">
                    <span id="progressStatus">Starting...</span>
                    <span id="progressPercent"></span>
                </div>
            </div>
        </div>
    </div>

    <div id="resultSection" style="display:none">
        <div class="panel">
            <div class="panel-title">Result</div>
            <div class="stats-box" style="margin-bottom:1rem">
                <div class="stat-row"><span class="stat-label">GIF size</span><span class="stat-value" id="gifSize">-</span></div>
            </div>
            <button class="btn btn-primary btn-full" id="downloadBtn">Download GIF</button>
        </div>
        <div class="panel" style="margin-top:1rem">
            <div class="panel-title">Preview</div>
            <div class="preview-area">
                <img id="gifPreview" style="display:none">
            </div>
        </div>
    </div>

    <div id="statusMsg"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/vid2gif.js') }}"></script>
{% endblock %}
